В терминале выполняем следующие действия:

Заходим под учеткой root
1. Создаем папку-точку монтирования:
cd /mnt
sudo mkdir cons
sudo chmod -R 777 cons

2. Редактируем /etc/fstab с целью дальнейшего монтирования папки на сервере:
nano /etc/fstab
В редакторе дописать в конец файла, все в одну строку:

//10.35.12.48/Consultant /mnt/consultant cifs _netdev,username=admin,password=scan,iocharset=utf8,file_mode=0777,dir_mode=0777,vers=1.0,rw 0 0

3. Монтируем папку:
sudo mount -a

4.Выходим из учетки ROOT 

5. Настраиваем wine для работы под данным пользователем (WINEPREFIX позволяет хранить настройки wine в отдельной "бутылке" под именем .ConsultantPlus, чтобы настройки wine были индивидуальны для КонсультантПлюс - крайне рекомендуем делать именно так, особенно под GosLinux):
WINEPREFIX=~/.ConsultantPlus winecfg
Во вкладке Диски добавляем диск k: с путем /mnt/consultant, нажимаем на кнопку "Дополнительно", ставим ему тип: Сетевой диск (иначе будет наблюдаться ошибка 50004/10061).

6. Отменяем декорацию окна КонсультантПлюс под среду запуска. На вкладке "Графика" убираем галочку с пункта "Разрешить менеджеру окон декорировать окна":

7. Запускаем:

cd ~/.ConsultantPlus/dosdevices/k:

WINEPREFIX=~/.ConsultantPlus wine cons.exe /group /linux /sprocess=0

Должна запуститься процедура регистрации рабочей станции. Не закрывая окна обмена информацией с администратором, ждем появления ярлыков.

Кроме того, на рабочем столе должны создаться два файла: один, с расширением .lnk, можно удалить, второй - ярлык linux, в нем необходимо изменить параметры запуска КонсультантПлюс, приписав в конце ключи /linux /sprocess=0.

На момент написания данной инструкции ключ /sprocess=0 необходим для подавления зависания процессов под wine во многопроцессном режиме. Также данный ключ рекомендуется с целью уменьшения системных требований КонсультантПлюс путем ограничения количества рабочих процессов.

Обратите также внимание на то, чтобы в строке запуска ярлыка был прописан правильный WINEPREFIX (для ярлыка он автоматически прописывается полным путем)

Установку можно считать завершенной.


